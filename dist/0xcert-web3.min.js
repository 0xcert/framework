!function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";function a(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),a(n(1)),a(n(2)),a(n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.MANAGE_ABILITIES=0]="MANAGE_ABILITIES",t[t.MINT_ASSET=1]="MINT_ASSET",t[t.REVOKE_ASSET=2]="REVOKE_ASSET",t[t.PAUSE_TRANSFER=3]="PAUSE_TRANSFER",t[t.UPDATE_PROOF=4]="UPDATE_PROOF",t[t.SIGN_MINT_CLAIM=5]="SIGN_MINT_CLAIM"}(e.AssetLedgerAbility||(e.AssetLedgerAbility={})),function(t){t[t.DISABLED=0]="DISABLED",t[t.ENABLED=1]="ENABLED"}(e.AssetLedgerTransferState||(e.AssetLedgerTransferState={})),function(t){t[t.BURNABLE=1]="BURNABLE",t[t.MUTABLE=2]="MUTABLE",t[t.PAUSABLE=3]="PAUSABLE",t[t.REVOKABLE=4]="REVOKABLE"}(e.AssetLedgerCapability||(e.AssetLedgerCapability={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UNHANDLED=0]="UNHANDLED",t[t.SIGNATURE_UNKNOWN=9e3]="SIGNATURE_UNKNOWN",t[t.SIGNATURE_FAILED=9001]="SIGNATURE_FAILED",t[t.INVALID_MAKER_ID=8e3]="INVALID_MAKER_ID"}(e.ConnectorIssue||(e.ConnectorIssue={}));e.ConnectorError=class extends Error{constructor(t,e){super(),this.name="ConnectorError",this.issue=t,this.original=e,this.message=`Connector error [issue: ${t}]`,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.CREATE_ASSET=1]="CREATE_ASSET",t[t.TRANSFER_ASSET=2]="TRANSFER_ASSET",t[t.TRANSFER_VALUE=3]="TRANSFER_VALUE"}(e.OrderActionKind||(e.OrderActionKind={}));e.Order=class{}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ETH_SIGN=0]="ETH_SIGN",t[t.TREZOR=1]="TREZOR",t[t.EIP712=2]="EIP712"}(e.SignMethod||(e.SignMethod={}))},,function(t,e,n){window.zxc=window.zxc||{},window.zxc.web3=window.zxc.web3||{},window.zxc.web3={...n(7),...n(18),...n(22),...n(31)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0);e.AssetLedgerTransferState=a.AssetLedgerTransferState,e.AssetLedgerAbility=a.AssetLedgerAbility,e.AssetLedgerCapability=a.AssetLedgerCapability,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(8))},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(9),s=n(10),o=n(11),r=n(12),u=n(13),c=n(14),p=n(15),d=n(16),l=n(17);e.AssetLedger=class{constructor(t,e){this.platform="web3",this.context=t,this.id=e,this.contract=this.getContract(e)}getAbilities(t){return a(this,void 0,void 0,function*(){return i.default(this,t)})}getCapabilities(){return a(this,void 0,void 0,function*(){return s.default(this)})}getInfo(){return a(this,void 0,void 0,function*(){return o.default(this)})}getSupply(){return a(this,void 0,void 0,function*(){return r.default(this)})}getTransferState(){return a(this,void 0,void 0,function*(){return u.default(this)})}assignAbilities(t,e){return a(this,void 0,void 0,function*(){return c.default(this,t,e)})}revokeAbilities(t,e){return a(this,void 0,void 0,function*(){return p.default(this,t,e)})}setTransferState(t){return a(this,void 0,void 0,function*(){return d.default(this,t)})}getContract(t){return new this.context.web3.eth.Contract(l.xcertAbi,t,{gas:6e6})}}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);e.default=function(t,e){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return yield Promise.all([i.AssetLedgerAbility.MANAGE_ABILITIES,i.AssetLedgerAbility.MINT_ASSET,i.AssetLedgerAbility.PAUSE_TRANSFER,i.AssetLedgerAbility.REVOKE_ASSET,i.AssetLedgerAbility.SIGN_MINT_CLAIM,i.AssetLedgerAbility.UPDATE_PROOF].map(n=>a(this,void 0,void 0,function*(){return(yield t.contract.methods.isAble(e,n).call())?n:-1}))).then(t=>t.filter(t=>-1!==t).sort())}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return yield Promise.all([[i.AssetLedgerCapability.BURNABLE,"0x42966c68"],[i.AssetLedgerCapability.MUTABLE,"0x5e2161af"],[i.AssetLedgerCapability.PAUSABLE,"0xbedb86fb"],[i.AssetLedgerCapability.REVOKABLE,"0x20c5429b"]].map(e=>a(this,void 0,void 0,function*(){return(yield t.contract.methods.supportsInterface(e[1]).call())?e[0]:-1}))).then(t=>t.filter(t=>-1!==t).sort())}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return{name:yield t.contract.methods.name().call(),symbol:yield t.contract.methods.symbol().call(),uriBase:yield t.contract.methods.uriBase().call(),conventionId:yield t.contract.methods.symbol().call()}}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return parseInt(yield t.contract.methods.totalSupply().call())}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return(yield t.contract.methods.isPaused().call())?i.AssetLedgerTransferState.DISABLED:i.AssetLedgerTransferState.ENABLED}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return a(this,void 0,void 0,function*(){return t.context.mutate(()=>a(this,void 0,void 0,function*(){return t.contract.methods.assignAbilities(e,n)}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return a(this,void 0,void 0,function*(){return t.context.mutate(()=>a(this,void 0,void 0,function*(){return t.contract.methods.revokeAbilities(e,n)}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);e.default=function(t,e){return a(this,void 0,void 0,function*(){const n=e!==i.AssetLedgerTransferState.ENABLED;return t.context.mutate(()=>a(this,void 0,void 0,function*(){return t.contract.methods.setPause(n)}))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xcertAbi=JSON.parse('[{"constant":true,"inputs":[{"name":"_interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_approved","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_id","type":"uint256"},{"name":"_proof","type":"bytes32"}],"name":"mint","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"revoke","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_uriBase","type":"string"}],"name":"setUriBase","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"},{"name":"_proof","type":"bytes32"}],"name":"updateTokenProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"conventionId","outputs":[{"name":"_conventionId","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"_owner","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_target","type":"address"},{"name":"_ability","type":"uint8"}],"name":"isAble","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"assignAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenProof","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"revokeAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_operator","type":"address"},{"name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isPaused","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_isPaused","type":"bool"}],"name":"setPause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"uriBase","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_name","type":"string"},{"name":"_symbol","type":"string"},{"name":"_uriBase","type":"string"},{"name":"_conventionId","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"isPaused","type":"bool"}],"name":"IsPaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_tokenId","type":"uint256"},{"indexed":false,"name":"_proof","type":"bytes32"}],"name":"TokenProofUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"AssignAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"RevokeAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":true,"name":"_tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_approved","type":"address"},{"indexed":true,"name":"_tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_operator","type":"address"},{"indexed":false,"name":"_approved","type":"bool"}],"name":"ApprovalForAll","type":"event"}]')},function(t,e,n){"use strict";function a(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),a(n(19)),a(n(4))},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),s=n(20),o=n(4);e.Context=class{constructor(t){this.platform="web3",this.web3=t.web3,this.myId=t.myId,this.exchangeId=t.exchangeId||"0x",this.signMethod=this.getSignMethod(t.signMethod)}attach(){return a(this,void 0,void 0,function*(){return this.myId=yield this.getAccountId(this.myId),this})}detach(){return a(this,void 0,void 0,function*(){return this.exchangeId=null,this.myId=null,this.signMethod=null,this.web3=null,this})}sign(t){return a(this,void 0,void 0,function*(){return`${this.signMethod}:${yield this.signData(t)}`})}query(t){return a(this,void 0,void 0,function*(){try{return{result:yield t()}}catch(t){throw s.parseError(t)}})}mutate(t,e){return a(this,void 0,void 0,function*(){e=yield this.getAccountId(e||this.myId);try{const n=1.2,a=yield t();let i=yield a.estimateGas({from:e});i=new this.web3.utils.BN(1.1*i);const o=yield this.web3.eth.getGasPrice().then(t=>t*n),r=yield this.web3.eth.getBlock("latest").then(t=>t.gasLimit);if(i>r)throw"Gas exceeds max allowed gas";return yield new Promise((t,n)=>{const s=a.send({from:e,gas:i,price:o});s.once("receipt",e=>t({hash:e.transactionHash})),s.once("error",n)}).then(t=>t)}catch(t){throw s.parseError(t)}})}transfer(t,e){return a(this,void 0,void 0,function*(){e=yield this.getAccountId(e||this.myId);try{const n=1.2,{value:a,to:i}=t,o=yield this.web3.eth.estimateGas({from:e,to:i,value:a}),r=yield this.web3.eth.getGasPrice().then(t=>t*n),u=yield this.web3.eth.getBlock("latest").then(t=>t.gasLimit);if(o>u)throw"Gas exceeds max allowed gas";return yield new Promise((t,n)=>{const s=this.web3.eth.sendTransaction({from:e,to:i,value:a,gas:o,gasPrice:r});s.once("transactionHash",e=>t({hash:e})),s.once("error",n)}).then(t=>t)}catch(t){throw s.parseError(t)}})}getAccounts(){return a(this,void 0,void 0,function*(){try{return yield this.web3.eth.getAccounts()}catch(t){throw s.parseError(t)}})}getAccountId(t){return a(this,void 0,void 0,function*(){const e=yield this.getAccounts();if(void 0===t&&(t=e[0]),-1===e.indexOf(t))throw new i.ConnectorError(i.ConnectorIssue.INVALID_MAKER_ID);return t})}getSignMethod(t){if(void 0===t&&(t=o.SignMethod.ETH_SIGN),-1===[0,1,2].indexOf(t))throw new i.ConnectorError(i.ConnectorIssue.SIGNATURE_UNKNOWN,`Unknown signature method ${t}`);return t}signData(t){return a(this,void 0,void 0,function*(){try{switch(this.signMethod){case o.SignMethod.ETH_SIGN:return yield this.web3.eth.sign(t,this.myId);case o.SignMethod.TREZOR:case o.SignMethod.EIP712:return"";default:return null}}catch(t){throw new i.ConnectorError(i.ConnectorIssue.SIGNATURE_FAILED,t)}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0);e.ConnectorError=a.ConnectorError,e.ConnectorIssue=a.ConnectorIssue,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(21))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=n(0);e.parseError=function(t){return t instanceof a.ConnectorError?t:new a.ConnectorError(a.ConnectorIssue.UNHANDLED,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(23))},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),s=n(24),o=n(30);e.OrderExchange=class{constructor(t){this.platform="web3",this.context=t,this.contract=new t.web3.eth.Contract(o.exchangeAbi,t.exchangeId,{gas:6e6})}claim(t){return a(this,void 0,void 0,function*(){const e=this.createOrderHash(t);return yield this.context.sign(e)})}perform(t,e){return a(this,void 0,void 0,function*(){const n=this.createRecipeTuple(t),i=this.createSignatureTuple(e);return this.context.mutate(()=>a(this,void 0,void 0,function*(){return this.contract.methods.perform(n,i)}))})}cancel(t){return a(this,void 0,void 0,function*(){const e=this.createRecipeTuple(t);return this.context.myId,this.context.mutate(()=>a(this,void 0,void 0,function*(){return this.contract.methods.cancel(e)}))})}createRecipeTuple(t){const e=t.actions.map(t=>({kind:this.getHashKind(t),proxy:this.getHashProxy(t),token:s.toString(t.ledgerId),param1:this.getHashParam1(t),to:s.toString(t.receiverId),value:this.getHashValue(t)})),n={from:s.toString(t.makerId),to:s.toString(t.takerId),actions:e,seed:s.toInteger(t.seed),expirationTimestamp:s.toSeconds(t.expiration)};return s.tuple(n)}createSignatureTuple(t){const[e,n]=t.split(":"),a={r:n.substr(0,66),s:`0x${n.substr(66,64)}`,v:parseInt(`0x${n.substr(130,2)}`)+27,kind:e};return s.tuple(a)}createOrderHash(t){let e="0x0";for(const n of t.actions)e=this.context.web3.utils.soliditySha3({t:"bytes32",v:e},{t:"uint8",v:this.getHashKind(n)},{t:"uint32",v:this.getHashProxy(n)},s.toString(n.ledgerId),this.getHashParam1(n),s.toString(n.receiverId),this.getHashValue(n));return this.context.web3.utils.soliditySha3(this.context.exchangeId,s.toString(t.makerId),s.toString(t.takerId),e,s.toInteger(t.seed),s.toSeconds(t.expiration))}getHashKind(t){return t.kind===i.OrderActionKind.CREATE_ASSET?0:1}getHashProxy(t){return t.kind===i.OrderActionKind.TRANSFER_VALUE?1:t.kind===i.OrderActionKind.TRANSFER_ASSET?3:0}getHashParam1(t){return t.kind===i.OrderActionKind.CREATE_ASSET?t.assetProof:this.context.web3.utils.padLeft(s.toString(t.senderId),64)}getHashValue(t){return t.assetId||s.toFloat(t.value)}}},function(t,e,n){"use strict";function a(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),a(n(25)),a(n(26)),a(n(27)),a(n(28)),a(n(29))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toFloat=function(t){return parseFloat(`${t}`)||0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toInteger=function(t){return parseInt(`${t}`)||0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toSeconds=function(t){return parseInt(`${parseFloat(`${t}`)/1e3}`)||0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toString=function(t){return null!==t&&void 0!==t?t.toString():null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tuple=function t(e){if(!(e instanceof Object))return[];var n=[],a=0;return Object.keys(e).forEach(i=>{if(e[i]instanceof Object)n[a]=t(e[i]);else if(e[i]instanceof Array){let s=0,o=[];e[i].forEach(n=>{o[s]=t(e[i]),s++}),n[a]=o}else n[a]=e[i];a++}),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeAbi=JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_data","type":"tuple"}],"name":"cancel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"orderCancelled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_target","type":"address"},{"name":"_ability","type":"uint8"}],"name":"isAble","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"assignAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_data","type":"tuple"},{"components":[{"name":"r","type":"bytes32"},{"name":"s","type":"bytes32"},{"name":"v","type":"uint8"},{"name":"kind","type":"uint8"}],"name":"_signature","type":"tuple"}],"name":"perform","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_signer","type":"address"},{"name":"_claim","type":"bytes32"},{"components":[{"name":"r","type":"bytes32"},{"name":"s","type":"bytes32"},{"name":"v","type":"uint8"},{"name":"kind","type":"uint8"}],"name":"_signature","type":"tuple"}],"name":"isValidSignature","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"revokeAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_orderData","type":"tuple"}],"name":"getOrderDataClaim","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"orderPerformed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint32"},{"name":"_proxy","type":"address"}],"name":"setProxy","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint32"}],"name":"idToProxy","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_maker","type":"address"},{"indexed":true,"name":"_taker","type":"address"},{"indexed":false,"name":"_claim","type":"bytes32"}],"name":"Perform","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_maker","type":"address"},{"indexed":true,"name":"_taker","type":"address"},{"indexed":false,"name":"_claim","type":"bytes32"}],"name":"Cancel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_id","type":"uint32"},{"indexed":false,"name":"_proxy","type":"address"}],"name":"ProxyChange","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"AssignAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"RevokeAbility","type":"event"}]')},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(32))},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(33),s=n(34),o=n(35);e.ValueLedger=class{constructor(t,e){this.platform="web3",this.context=t,this.id=e,this.contract=this.getContract(e)}getInfo(){return a(this,void 0,void 0,function*(){return i.default(this)})}getSupply(){return a(this,void 0,void 0,function*(){return s.default(this)})}getContract(t){return new this.context.web3.eth.Contract(o.tokenAbi,t,{gas:6e6})}}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return{name:yield t.contract.methods.name().call(),symbol:yield t.contract.methods.symbol().call(),decimals:parseInt(yield t.contract.methods.decimals().call())}}))})}},function(t,e,n){"use strict";var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,s){function o(t){try{u(a.next(t))}catch(t){s(t)}}function r(t){try{u(a.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,r)}u((a=a.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a(this,void 0,void 0,function*(){return t.context.query(()=>a(this,void 0,void 0,function*(){return parseInt(yield t.contract.methods.totalSupply().call())}))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tokenAbi=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"_totalSupply","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"_decimals","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"_balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"_remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}]')}]);