/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 173);
/******/ })
/************************************************************************/
/******/ ({

/***/ 173:
/***/ (function(module, exports, __webpack_require__) {

window.$0xcert = window.$0xcert || {};
window.$0xcert.web3 = __webpack_require__(174);


/***/ }),

/***/ 174:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var web3_context_1 = __webpack_require__(73);
exports.SignMethod = web3_context_1.SignMethod;
__export(__webpack_require__(181));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 175:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
const web3_error_parser_1 = __webpack_require__(179);
const types_1 = __webpack_require__(74);
class Context {
    constructor(options) {
        this.web3 = options.web3;
        this.myId = options.myId;
        this.exchangeId = options.exchangeId || '0x';
        this.signMethod = this.getSignMethod(options.signMethod);
    }
    attach() {
        return __awaiter(this, void 0, void 0, function* () {
            this.myId = yield this.getAccountId(this.myId);
            return this;
        });
    }
    detach() {
        return __awaiter(this, void 0, void 0, function* () {
            this.exchangeId = null;
            this.myId = null;
            this.signMethod = null;
            this.web3 = null;
            return this;
        });
    }
    sign(data) {
        return __awaiter(this, void 0, void 0, function* () {
            return `${this.signMethod}:${yield this.signData(data)}`;
        });
    }
    query(resolver) {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                return {
                    result: yield resolver(),
                };
            }
            catch (error) {
                throw web3_error_parser_1.parseError(error);
            }
        });
    }
    mutate(resolver, from) {
        return __awaiter(this, void 0, void 0, function* () {
            from = yield this.getAccountId(from || this.myId);
            try {
                const multiplyer = 1.2;
                const obj = yield resolver();
                let gas = yield obj.estimateGas({ from });
                gas = new this.web3.utils.BN(gas * 1.1);
                const price = yield this.web3.eth.getGasPrice().then((p) => p * multiplyer);
                const gasLimit = yield this.web3.eth.getBlock('latest').then((b) => b.gasLimit);
                if (gas > gasLimit) {
                    throw 'Gas exceeds max allowed gas';
                }
                return yield new Promise((resolve, reject) => {
                    const promise = obj.send({ from, gas, price });
                    promise.once('receipt', (tx) => resolve({ id: tx.transactionHash }));
                    promise.once('error', reject);
                }).then((d) => {
                    return d;
                });
            }
            catch (error) {
                throw web3_error_parser_1.parseError(error);
            }
        });
    }
    transfer(data, from) {
        return __awaiter(this, void 0, void 0, function* () {
            from = yield this.getAccountId(from || this.myId);
            try {
                const multiplyer = 1.2;
                const { value, to } = data;
                const gas = yield this.web3.eth.estimateGas({ from, to, value });
                const gasPrice = yield this.web3.eth.getGasPrice().then((p) => p * multiplyer);
                const gasLimit = yield this.web3.eth.getBlock('latest').then((b) => b.gasLimit);
                if (gas > gasLimit) {
                    throw 'Gas exceeds max allowed gas';
                }
                return yield new Promise((resolve, reject) => {
                    const promise = this.web3.eth.sendTransaction({ from, to, value, gas, gasPrice });
                    promise.once('transactionHash', (id) => resolve({ id }));
                    promise.once('error', reject);
                }).then((d) => {
                    return d;
                });
            }
            catch (error) {
                throw web3_error_parser_1.parseError(error);
            }
        });
    }
    getAccounts() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                return yield this.web3.eth.getAccounts();
            }
            catch (error) {
                throw web3_error_parser_1.parseError(error);
            }
        });
    }
    getAccountId(accountid) {
        return __awaiter(this, void 0, void 0, function* () {
            const accounts = yield this.getAccounts();
            if (accountid === undefined) {
                accountid = accounts[0];
            }
            if (accounts.indexOf(accountid) === -1) {
                throw new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_MAKER_ID);
            }
            return accountid;
        });
    }
    getSignMethod(signMethod) {
        if (signMethod === undefined) {
            signMethod = types_1.SignMethod.ETH_SIGN;
        }
        if ([0, 1, 2].indexOf(signMethod) === -1) {
            throw new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.SIGNATURE_UNKNOWN, `Unknown signature method ${signMethod}`);
        }
        return signMethod;
    }
    signData(data) {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                switch (this.signMethod) {
                    case types_1.SignMethod.ETH_SIGN:
                        return yield this.web3.eth.sign(data, this.myId);
                    case types_1.SignMethod.TREZOR:
                        return '';
                    case types_1.SignMethod.EIP712:
                        return yield this.web3.eth.sign(data, this.myId);
                    default:
                        return null;
                }
            }
            catch (error) {
                throw new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.SIGNATURE_FAILED, error);
            }
        });
    }
}
exports.Context = Context;
//# sourceMappingURL=context.js.map

/***/ }),

/***/ 176:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AssetLedgerAbility;
(function (AssetLedgerAbility) {
    AssetLedgerAbility[AssetLedgerAbility["MANAGE_ABILITIES"] = 0] = "MANAGE_ABILITIES";
    AssetLedgerAbility[AssetLedgerAbility["MINT_ASSET"] = 1] = "MINT_ASSET";
    AssetLedgerAbility[AssetLedgerAbility["REVOKE_ASSET"] = 2] = "REVOKE_ASSET";
    AssetLedgerAbility[AssetLedgerAbility["PAUSE_TRANSFER"] = 3] = "PAUSE_TRANSFER";
    AssetLedgerAbility[AssetLedgerAbility["UPDATE_PROOF"] = 4] = "UPDATE_PROOF";
    AssetLedgerAbility[AssetLedgerAbility["SIGN_MINT_CLAIM"] = 5] = "SIGN_MINT_CLAIM";
})(AssetLedgerAbility = exports.AssetLedgerAbility || (exports.AssetLedgerAbility = {}));
var AssetLedgerTransferState;
(function (AssetLedgerTransferState) {
    AssetLedgerTransferState[AssetLedgerTransferState["DISABLED"] = 0] = "DISABLED";
    AssetLedgerTransferState[AssetLedgerTransferState["ENABLED"] = 1] = "ENABLED";
})(AssetLedgerTransferState = exports.AssetLedgerTransferState || (exports.AssetLedgerTransferState = {}));
var AssetLedgerCapability;
(function (AssetLedgerCapability) {
    AssetLedgerCapability[AssetLedgerCapability["BURNABLE"] = 1] = "BURNABLE";
    AssetLedgerCapability[AssetLedgerCapability["MUTABLE"] = 2] = "MUTABLE";
    AssetLedgerCapability[AssetLedgerCapability["PAUSABLE"] = 3] = "PAUSABLE";
    AssetLedgerCapability[AssetLedgerCapability["REVOKABLE"] = 4] = "REVOKABLE";
})(AssetLedgerCapability = exports.AssetLedgerCapability || (exports.AssetLedgerCapability = {}));
//# sourceMappingURL=asset-ledger.js.map

/***/ }),

/***/ 177:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ConnectorIssue;
(function (ConnectorIssue) {
    ConnectorIssue[ConnectorIssue["UNHANDLED"] = 0] = "UNHANDLED";
    ConnectorIssue[ConnectorIssue["GENERAL_REVERT"] = 1] = "GENERAL_REVERT";
    ConnectorIssue[ConnectorIssue["SIGNATURE_UNKNOWN"] = 9000] = "SIGNATURE_UNKNOWN";
    ConnectorIssue[ConnectorIssue["SIGNATURE_FAILED"] = 9001] = "SIGNATURE_FAILED";
    ConnectorIssue[ConnectorIssue["INVALID_MAKER_ID"] = 8000] = "INVALID_MAKER_ID";
    ConnectorIssue[ConnectorIssue["ZERO_ADDRESS"] = 1001] = "ZERO_ADDRESS";
    ConnectorIssue[ConnectorIssue["INVALID_NFT"] = 1002] = "INVALID_NFT";
    ConnectorIssue[ConnectorIssue["NOT_AUTHORIZED"] = 1003] = "NOT_AUTHORIZED";
    ConnectorIssue[ConnectorIssue["RECEIVER_DOES_NOT_SUPPORT_NFT"] = 1004] = "RECEIVER_DOES_NOT_SUPPORT_NFT";
    ConnectorIssue[ConnectorIssue["NFT_ALREADY_EXISTS"] = 1005] = "NFT_ALREADY_EXISTS";
    ConnectorIssue[ConnectorIssue["INVALID_INDEX"] = 1006] = "INVALID_INDEX";
    ConnectorIssue[ConnectorIssue["TRANSFERS_PAUSED"] = 1007] = "TRANSFERS_PAUSED";
    ConnectorIssue[ConnectorIssue["COIN_TRANSFER_FAILED"] = 1008] = "COIN_TRANSFER_FAILED";
    ConnectorIssue[ConnectorIssue["INVALID_SIGNATURE_KIND"] = 1009] = "INVALID_SIGNATURE_KIND";
    ConnectorIssue[ConnectorIssue["INVALID_PROXY"] = 1010] = "INVALID_PROXY";
    ConnectorIssue[ConnectorIssue["YOU_ARE_NOT_THE_TAKER"] = 1011] = "YOU_ARE_NOT_THE_TAKER";
    ConnectorIssue[ConnectorIssue["SENDER_NOT_TAKER_OR_MAKER"] = 1012] = "SENDER_NOT_TAKER_OR_MAKER";
    ConnectorIssue[ConnectorIssue["ORDER_EXPIRED"] = 1013] = "ORDER_EXPIRED";
    ConnectorIssue[ConnectorIssue["INVALID_SIGNATURE"] = 1014] = "INVALID_SIGNATURE";
    ConnectorIssue[ConnectorIssue["ORDER_CANCELED"] = 1015] = "ORDER_CANCELED";
    ConnectorIssue[ConnectorIssue["ORDER_CANNOT_BE_PERFORMED_TWICE"] = 1016] = "ORDER_CANNOT_BE_PERFORMED_TWICE";
    ConnectorIssue[ConnectorIssue["YOU_ARE_NOT_THE_MAKER"] = 1017] = "YOU_ARE_NOT_THE_MAKER";
    ConnectorIssue[ConnectorIssue["SIGNER_NOT_AUTHORIZED"] = 1018] = "SIGNER_NOT_AUTHORIZED";
    ConnectorIssue[ConnectorIssue["ONE_ZERO_ABILITY_HAS_TO_EXIST"] = 1019] = "ONE_ZERO_ABILITY_HAS_TO_EXIST";
    ConnectorIssue[ConnectorIssue["TRANSATION_RESPONSE_ERROR_CHECK_PENDING_TRANSACTIONS"] = 2001] = "TRANSATION_RESPONSE_ERROR_CHECK_PENDING_TRANSACTIONS";
    ConnectorIssue[ConnectorIssue["INVALID_ADDRESS"] = 2002] = "INVALID_ADDRESS";
})(ConnectorIssue = exports.ConnectorIssue || (exports.ConnectorIssue = {}));
class ConnectorError extends Error {
    constructor(issue, original) {
        super();
        this.name = 'ConnectorError';
        this.issue = issue;
        this.original = original;
        this.message = `Connector error [issue: ${issue}]`;
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }
}
exports.ConnectorError = ConnectorError;
//# sourceMappingURL=errors.js.map

/***/ }),

/***/ 178:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrderActionKind;
(function (OrderActionKind) {
    OrderActionKind[OrderActionKind["CREATE_ASSET"] = 1] = "CREATE_ASSET";
    OrderActionKind[OrderActionKind["TRANSFER_ASSET"] = 2] = "TRANSFER_ASSET";
    OrderActionKind[OrderActionKind["TRANSFER_VALUE"] = 3] = "TRANSFER_VALUE";
})(OrderActionKind = exports.OrderActionKind || (exports.OrderActionKind = {}));
class Order {
}
exports.Order = Order;
//# sourceMappingURL=order.js.map

/***/ }),

/***/ 179:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var scaffold_1 = __webpack_require__(8);
exports.ConnectorError = scaffold_1.ConnectorError;
exports.ConnectorIssue = scaffold_1.ConnectorIssue;
__export(__webpack_require__(180));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 180:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
function parseError(error) {
    if (error instanceof scaffold_1.ConnectorError) {
        return error;
    }
    else {
        const stringError = String(error);
        if (stringError.indexOf('revert') > 0) {
            if (stringError.indexOf('003001') > 0
                || stringError.indexOf('004001') > 0
                || stringError.indexOf('005001') > 0
                || stringError.indexOf('006001') > 0
                || stringError.indexOf('018002') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.ZERO_ADDRESS, error);
            }
            if (stringError.indexOf('003002') > 0
                || stringError.indexOf('004002') > 0
                || stringError.indexOf('005002') > 0
                || stringError.indexOf('006002') > 0
                || stringError.indexOf('010001') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_NFT, error);
            }
            if (stringError.indexOf('003003') > 0
                || stringError.indexOf('003004') > 0
                || stringError.indexOf('004003') > 0
                || stringError.indexOf('004004') > 0
                || stringError.indexOf('005003') > 0
                || stringError.indexOf('005004') > 0
                || stringError.indexOf('006003') > 0
                || stringError.indexOf('006004') > 0
                || stringError.indexOf('008001') > 0
                || stringError.indexOf('017001') > 0
                || stringError.indexOf('018001') > 0
                || stringError.indexOf('019001') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.NOT_AUTHORIZED, error);
            }
            if (stringError.indexOf('003005') > 0
                || stringError.indexOf('004005') > 0
                || stringError.indexOf('005005') > 0
                || stringError.indexOf('006005') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.RECEIVER_DOES_NOT_SUPPORT_NFT, error);
            }
            if (stringError.indexOf('003006') > 0
                || stringError.indexOf('004006') > 0
                || stringError.indexOf('005006') > 0
                || stringError.indexOf('006006') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.NFT_ALREADY_EXISTS, error);
            }
            if (stringError.indexOf('005007') > 0
                || stringError.indexOf('006007') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_INDEX, error);
            }
            if (stringError.indexOf('009001') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.TRANSFERS_PAUSED, error);
            }
            if (stringError.indexOf('012001') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.COIN_TRANSFER_FAILED, error);
            }
            if (stringError.indexOf('015001') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_SIGNATURE_KIND, error);
            }
            if (stringError.indexOf('015002') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_PROXY, error);
            }
            if (stringError.indexOf('015003') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.YOU_ARE_NOT_THE_TAKER, error);
            }
            if (stringError.indexOf('015004') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.SENDER_NOT_TAKER_OR_MAKER, error);
            }
            if (stringError.indexOf('015005') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.ORDER_EXPIRED, error);
            }
            if (stringError.indexOf('015006') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_SIGNATURE, error);
            }
            if (stringError.indexOf('015007') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.ORDER_CANCELED, error);
            }
            if (stringError.indexOf('015008') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.ORDER_CANNOT_BE_PERFORMED_TWICE, error);
            }
            if (stringError.indexOf('015009') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.YOU_ARE_NOT_THE_MAKER, error);
            }
            if (stringError.indexOf('015010') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.SIGNER_NOT_AUTHORIZED, error);
            }
            if (stringError.indexOf('017002') > 0) {
                return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.ONE_ZERO_ABILITY_HAS_TO_EXIST, error);
            }
            return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.GENERAL_REVERT, error);
        }
        if (stringError.indexOf('Transaction was not mined within') > 0
            || stringError.indexOf('Invalid JSON RPC response') > 0) {
            return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.TRANSATION_RESPONSE_ERROR_CHECK_PENDING_TRANSACTIONS, error);
        }
        if (stringError.indexOf('invalid address') > 0
            || stringError.indexOf('is invalid, the capitalization checksum test failed, or its an indrect IBAN address which') > 0
            || stringError.indexOf('Provided address is not a valid addres') > 0) {
            return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.INVALID_ADDRESS, error);
        }
        return new scaffold_1.ConnectorError(scaffold_1.ConnectorIssue.UNHANDLED, error);
    }
}
exports.parseError = parseError;
//# sourceMappingURL=errors.js.map

/***/ }),

/***/ 181:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const web3_context_1 = __webpack_require__(73);
const web3_asset_ledger_1 = __webpack_require__(182);
const web3_value_ledger_1 = __webpack_require__(193);
const web3_order_exchange_1 = __webpack_require__(198);
class Connector {
    constructor(options) {
        this.context = new web3_context_1.Context(options);
    }
    sign(val) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.context.sign(val);
        });
    }
    getMutation(id) {
        return __awaiter(this, void 0, void 0, function* () {
            const receipt = yield this.context.web3.eth.getTransaction(id);
            if (!receipt) {
                return null;
            }
            const currentBlock = yield this.context.web3.eth.getBlockNumber();
            return {
                id,
                confirmations: currentBlock - receipt.blockNumber,
            };
        });
    }
    getAssetLedger(id) {
        return __awaiter(this, void 0, void 0, function* () {
            return new web3_asset_ledger_1.AssetLedger(this.context, id);
        });
    }
    getValueLedger(id) {
        return __awaiter(this, void 0, void 0, function* () {
            return new web3_value_ledger_1.ValueLedger(this.context, id);
        });
    }
    getOrderExchange(id = null) {
        return __awaiter(this, void 0, void 0, function* () {
            return new web3_order_exchange_1.OrderExchange(this.context, id);
        });
    }
    createQueue(schema) {
        return null;
    }
}
exports.Connector = Connector;
//# sourceMappingURL=connector.js.map

/***/ }),

/***/ 182:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var scaffold_1 = __webpack_require__(8);
exports.AssetLedgerTransferState = scaffold_1.AssetLedgerTransferState;
exports.AssetLedgerAbility = scaffold_1.AssetLedgerAbility;
exports.AssetLedgerCapability = scaffold_1.AssetLedgerCapability;
__export(__webpack_require__(183));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 183:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const get_abilities_1 = __webpack_require__(184);
const get_capabilities_1 = __webpack_require__(185);
const get_info_1 = __webpack_require__(186);
const get_supply_1 = __webpack_require__(187);
const get_transfer_state_1 = __webpack_require__(188);
const assign_abilities_1 = __webpack_require__(189);
const revoke_abilities_1 = __webpack_require__(190);
const set_transfer_state_1 = __webpack_require__(191);
const env = __webpack_require__(192);
class AssetLedger {
    constructor(context, id) {
        this.context = context;
        this.contract = this.getContract(id);
    }
    get id() {
        return this.contract.options.address;
    }
    getAbilities(accountId) {
        return __awaiter(this, void 0, void 0, function* () {
            return get_abilities_1.default(this, accountId);
        });
    }
    getCapabilities() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_capabilities_1.default(this);
        });
    }
    getInfo() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_info_1.default(this);
        });
    }
    getSupply() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_supply_1.default(this);
        });
    }
    getTransferState() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_transfer_state_1.default(this);
        });
    }
    assignAbilities(accountId, abilities) {
        return __awaiter(this, void 0, void 0, function* () {
            return assign_abilities_1.default(this, accountId, abilities);
        });
    }
    revokeAbilities(accountId, abilities) {
        return __awaiter(this, void 0, void 0, function* () {
            return revoke_abilities_1.default(this, accountId, abilities);
        });
    }
    setTransferState(state) {
        return __awaiter(this, void 0, void 0, function* () {
            return set_transfer_state_1.default(this, state);
        });
    }
    getContract(id) {
        return new this.context.web3.eth.Contract(env.xcertAbi, id, { gas: 6000000 });
    }
}
exports.AssetLedger = AssetLedger;
//# sourceMappingURL=ledger.js.map

/***/ }),

/***/ 184:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
function default_1(ledger, accountId) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            return yield Promise.all([scaffold_1.AssetLedgerAbility.MANAGE_ABILITIES,
                scaffold_1.AssetLedgerAbility.MINT_ASSET,
                scaffold_1.AssetLedgerAbility.PAUSE_TRANSFER,
                scaffold_1.AssetLedgerAbility.REVOKE_ASSET,
                scaffold_1.AssetLedgerAbility.SIGN_MINT_CLAIM,
                scaffold_1.AssetLedgerAbility.UPDATE_PROOF,
            ].map((ability) => __awaiter(this, void 0, void 0, function* () {
                const able = yield ledger.contract.methods.isAble(accountId, ability).call();
                return able ? ability : -1;
            }))).then((abilities) => {
                return abilities.filter((a) => a !== -1).sort();
            });
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-abilities.js.map

/***/ }),

/***/ 185:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            return yield Promise.all([[scaffold_1.AssetLedgerCapability.BURNABLE, '0x42966c68'],
                [scaffold_1.AssetLedgerCapability.MUTABLE, '0x5e2161af'],
                [scaffold_1.AssetLedgerCapability.PAUSABLE, '0xbedb86fb'],
                [scaffold_1.AssetLedgerCapability.REVOKABLE, '0x20c5429b'],
            ].map((capability) => __awaiter(this, void 0, void 0, function* () {
                const supported = yield ledger.contract.methods.supportsInterface(capability[1]).call();
                return supported ? capability[0] : -1;
            }))).then((abilities) => {
                return abilities.filter((a) => a !== -1).sort();
            });
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-capabilities.js.map

/***/ }),

/***/ 186:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            const name = yield ledger.contract.methods.name().call();
            const symbol = yield ledger.contract.methods.symbol().call();
            const uriBase = yield ledger.contract.methods.uriBase().call();
            const conventionId = yield ledger.contract.methods.symbol().call();
            return { name, symbol, uriBase, conventionId };
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-info.js.map

/***/ }),

/***/ 187:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            const total = parseInt(yield ledger.contract.methods.totalSupply().call());
            return total;
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-supply.js.map

/***/ }),

/***/ 188:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            const paused = yield ledger.contract.methods.isPaused().call();
            const state = paused ? scaffold_1.AssetLedgerTransferState.DISABLED : scaffold_1.AssetLedgerTransferState.ENABLED;
            return state;
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-transfer-state.js.map

/***/ }),

/***/ 189:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger, accountId, abilities) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.mutate(() => __awaiter(this, void 0, void 0, function* () {
            return ledger.contract.methods.assignAbilities(accountId, abilities);
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=assign-abilities.js.map

/***/ }),

/***/ 190:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger, accountId, abilities) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.mutate(() => __awaiter(this, void 0, void 0, function* () {
            return ledger.contract.methods.revokeAbilities(accountId, abilities);
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=revoke-abilities.js.map

/***/ }),

/***/ 191:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
function default_1(ledger, state) {
    return __awaiter(this, void 0, void 0, function* () {
        const paused = state !== scaffold_1.AssetLedgerTransferState.ENABLED;
        return ledger.context.mutate(() => __awaiter(this, void 0, void 0, function* () {
            return ledger.contract.methods.setPause(paused);
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=set-transfer-state.js.map

/***/ }),

/***/ 192:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.xcertAbi = JSON.parse('[{"constant":true,"inputs":[{"name":"_interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_approved","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_id","type":"uint256"},{"name":"_proof","type":"bytes32"}],"name":"mint","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"revoke","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_uriBase","type":"string"}],"name":"setUriBase","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_tokenId","type":"uint256"},{"name":"_proof","type":"bytes32"}],"name":"updateTokenProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"conventionId","outputs":[{"name":"_conventionId","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"_owner","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_target","type":"address"},{"name":"_ability","type":"uint8"}],"name":"isAble","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"assignAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenProof","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"revokeAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_operator","type":"address"},{"name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isPaused","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_isPaused","type":"bool"}],"name":"setPause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"uriBase","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_name","type":"string"},{"name":"_symbol","type":"string"},{"name":"_uriBase","type":"string"},{"name":"_conventionId","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"isPaused","type":"bool"}],"name":"IsPaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_tokenId","type":"uint256"},{"indexed":false,"name":"_proof","type":"bytes32"}],"name":"TokenProofUpdate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"AssignAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"RevokeAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":true,"name":"_tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_approved","type":"address"},{"indexed":true,"name":"_tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_operator","type":"address"},{"indexed":false,"name":"_approved","type":"bool"}],"name":"ApprovalForAll","type":"event"}]');
//# sourceMappingURL=env.js.map

/***/ }),

/***/ 193:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(194));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 194:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const get_info_1 = __webpack_require__(195);
const get_supply_1 = __webpack_require__(196);
const env = __webpack_require__(197);
class ValueLedger {
    constructor(context, id) {
        this.context = context;
        this.contract = this.getContract(id);
    }
    get id() {
        return this.contract.options.address;
    }
    getInfo() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_info_1.default(this);
        });
    }
    getSupply() {
        return __awaiter(this, void 0, void 0, function* () {
            return get_supply_1.default(this);
        });
    }
    getContract(id) {
        return new this.context.web3.eth.Contract(env.tokenAbi, id, { gas: 6000000 });
    }
}
exports.ValueLedger = ValueLedger;
//# sourceMappingURL=ledger.js.map

/***/ }),

/***/ 195:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            const name = yield ledger.contract.methods.name().call();
            const symbol = yield ledger.contract.methods.symbol().call();
            const decimals = parseInt(yield ledger.contract.methods.decimals().call());
            return { name, symbol, decimals };
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-info.js.map

/***/ }),

/***/ 196:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
function default_1(ledger) {
    return __awaiter(this, void 0, void 0, function* () {
        return ledger.context.query(() => __awaiter(this, void 0, void 0, function* () {
            const total = parseInt(yield ledger.contract.methods.totalSupply().call());
            return total;
        }));
    });
}
exports.default = default_1;
//# sourceMappingURL=get-supply.js.map

/***/ }),

/***/ 197:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.tokenAbi = JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"_totalSupply","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"_decimals","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"_balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"_success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"_remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}]');
//# sourceMappingURL=env.js.map

/***/ }),

/***/ 198:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(199));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 199:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const scaffold_1 = __webpack_require__(8);
const web3_utils_1 = __webpack_require__(200);
const env = __webpack_require__(206);
class OrderExchange {
    constructor(context, id) {
        this.context = context;
        this.contract = this.getContract(id);
    }
    get id() {
        return this.contract.options.address;
    }
    claim(order) {
        return __awaiter(this, void 0, void 0, function* () {
            const hash = this.createOrderHash(order);
            return yield this.context.sign(hash);
        });
    }
    perform(order, claim) {
        return __awaiter(this, void 0, void 0, function* () {
            const recipeTuple = this.createRecipeTuple(order);
            const signatureTuple = this.createSignatureTuple(claim);
            return this.context.mutate(() => __awaiter(this, void 0, void 0, function* () {
                return this.contract.methods.perform(recipeTuple, signatureTuple);
            }));
        });
    }
    cancel(order) {
        return __awaiter(this, void 0, void 0, function* () {
            const recipeTuple = this.createRecipeTuple(order);
            const from = this.context.myId;
            return this.context.mutate(() => __awaiter(this, void 0, void 0, function* () {
                return this.contract.methods.cancel(recipeTuple);
            }));
        });
    }
    createRecipeTuple(order) {
        const actions = order.actions.map((action) => {
            return {
                kind: this.getHashKind(action),
                proxy: this.getHashProxy(action),
                token: web3_utils_1.toString(action.ledgerId),
                param1: this.getHashParam1(action),
                to: web3_utils_1.toString(action.receiverId),
                value: this.getHashValue(action),
            };
        });
        const recipeData = {
            from: web3_utils_1.toString(order.makerId),
            to: web3_utils_1.toString(order.takerId),
            actions,
            seed: web3_utils_1.toInteger(order.seed),
            expirationTimestamp: web3_utils_1.toSeconds(order.expiration),
        };
        return web3_utils_1.tuple(recipeData);
    }
    createSignatureTuple(claim) {
        const [kind, signature] = claim.split(':');
        const signatureData = {
            r: signature.substr(0, 66),
            s: `0x${signature.substr(66, 64)}`,
            v: parseInt(`0x${signature.substr(130, 2)}`),
            kind,
        };
        if (signatureData.v < 27) {
            signatureData.v = signatureData.v + 27;
        }
        return web3_utils_1.tuple(signatureData);
    }
    createOrderHash(order) {
        let temp = '0x0';
        for (const action of order.actions) {
            temp = this.context.web3.utils.soliditySha3({ t: 'bytes32', v: temp }, { t: 'uint8', v: this.getHashKind(action) }, { t: 'uint32', v: this.getHashProxy(action) }, web3_utils_1.toString(action.ledgerId), this.getHashParam1(action), web3_utils_1.toString(action.receiverId), this.getHashValue(action));
        }
        return this.context.web3.utils.soliditySha3(this.context.exchangeId, web3_utils_1.toString(order.makerId), web3_utils_1.toString(order.takerId), temp, web3_utils_1.toInteger(order.seed), web3_utils_1.toSeconds(order.expiration));
    }
    getHashKind(action) {
        return action.kind === scaffold_1.OrderActionKind.CREATE_ASSET ? 0 : 1;
    }
    getHashProxy(action) {
        if (action.kind === scaffold_1.OrderActionKind.TRANSFER_VALUE) {
            return 1;
        }
        else if (action.kind === scaffold_1.OrderActionKind.TRANSFER_ASSET) {
            return 3;
        }
        else {
            return 0;
        }
    }
    getHashParam1(action) {
        return action.kind === scaffold_1.OrderActionKind.CREATE_ASSET
            ? action['assetProof']
            : this.context.web3.utils.padLeft(web3_utils_1.toString(action.senderId), 64);
    }
    getHashValue(action) {
        return action['assetId'] || web3_utils_1.toFloat(action['value']);
    }
    getContract(id) {
        id = id || this.context.exchangeId;
        return new this.context.web3.eth.Contract(env.exchangeAbi, id, { gas: 6000000 });
    }
}
exports.OrderExchange = OrderExchange;
//# sourceMappingURL=order-exchange.js.map

/***/ }),

/***/ 200:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(201));
__export(__webpack_require__(202));
__export(__webpack_require__(203));
__export(__webpack_require__(204));
__export(__webpack_require__(205));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 201:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function toFloat(val) {
    return parseFloat(`${val}`) || 0;
}
exports.toFloat = toFloat;
//# sourceMappingURL=to-float.js.map

/***/ }),

/***/ 202:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function toInteger(val) {
    return parseInt(`${val}`) || 0;
}
exports.toInteger = toInteger;
//# sourceMappingURL=to-integer.js.map

/***/ }),

/***/ 203:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function toSeconds(milliseconds) {
    return parseInt(`${parseFloat(`${milliseconds}`) / 1000}`) || 0;
}
exports.toSeconds = toSeconds;
//# sourceMappingURL=to-seconds.js.map

/***/ }),

/***/ 204:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function toString(val) {
    return val !== null && val !== undefined ? val.toString() : null;
}
exports.toString = toString;
//# sourceMappingURL=to-string.js.map

/***/ }),

/***/ 205:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function tuple(obj) {
    if (!(obj instanceof Object)) {
        return [];
    }
    var output = [];
    var i = 0;
    Object.keys(obj).forEach((k) => {
        if (obj[k] instanceof Object) {
            output[i] = tuple(obj[k]);
        }
        else if (obj[k] instanceof Array) {
            let j1 = 0;
            let temp1 = [];
            obj[k].forEach((ak) => {
                temp1[j1] = tuple(obj[k]);
                j1++;
            });
            output[i] = temp1;
        }
        else {
            output[i] = obj[k];
        }
        i++;
    });
    return output;
}
exports.tuple = tuple;
//# sourceMappingURL=tuples.js.map

/***/ }),

/***/ 206:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.exchangeAbi = JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_data","type":"tuple"}],"name":"cancel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"orderCancelled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_target","type":"address"},{"name":"_ability","type":"uint8"}],"name":"isAble","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"assignAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_data","type":"tuple"},{"components":[{"name":"r","type":"bytes32"},{"name":"s","type":"bytes32"},{"name":"v","type":"uint8"},{"name":"kind","type":"uint8"}],"name":"_signature","type":"tuple"}],"name":"perform","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_signer","type":"address"},{"name":"_claim","type":"bytes32"},{"components":[{"name":"r","type":"bytes32"},{"name":"s","type":"bytes32"},{"name":"v","type":"uint8"},{"name":"kind","type":"uint8"}],"name":"_signature","type":"tuple"}],"name":"isValidSignature","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_target","type":"address"},{"name":"_abilities","type":"uint8[]"}],"name":"revokeAbilities","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"components":[{"name":"maker","type":"address"},{"name":"taker","type":"address"},{"components":[{"name":"kind","type":"uint8"},{"name":"proxy","type":"uint32"},{"name":"token","type":"address"},{"name":"param1","type":"bytes32"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"actions","type":"tuple[]"},{"name":"seed","type":"uint256"},{"name":"expiration","type":"uint256"}],"name":"_orderData","type":"tuple"}],"name":"getOrderDataClaim","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"orderPerformed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint32"},{"name":"_proxy","type":"address"}],"name":"setProxy","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint32"}],"name":"idToProxy","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_maker","type":"address"},{"indexed":true,"name":"_taker","type":"address"},{"indexed":false,"name":"_claim","type":"bytes32"}],"name":"Perform","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_maker","type":"address"},{"indexed":true,"name":"_taker","type":"address"},{"indexed":false,"name":"_claim","type":"bytes32"}],"name":"Cancel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_id","type":"uint32"},{"indexed":false,"name":"_proxy","type":"address"}],"name":"ProxyChange","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"AssignAbility","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_target","type":"address"},{"indexed":true,"name":"_ability","type":"uint8"}],"name":"RevokeAbility","type":"event"}]');
//# sourceMappingURL=env.js.map

/***/ }),

/***/ 73:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(175));
__export(__webpack_require__(74));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 74:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SignMethod;
(function (SignMethod) {
    SignMethod[SignMethod["ETH_SIGN"] = 0] = "ETH_SIGN";
    SignMethod[SignMethod["TREZOR"] = 1] = "TREZOR";
    SignMethod[SignMethod["EIP712"] = 2] = "EIP712";
})(SignMethod = exports.SignMethod || (exports.SignMethod = {}));
//# sourceMappingURL=types.js.map

/***/ }),

/***/ 8:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
__export(__webpack_require__(176));
__export(__webpack_require__(177));
__export(__webpack_require__(178));
//# sourceMappingURL=index.js.map

/***/ })

/******/ });