!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=97)}({1:function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(5)),r(i(6)),r(i(27)),r(i(29)),r(i(7))},10:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CREATE_ASSET=1]="CREATE_ASSET",e[e.TRANSFER_ASSET=2]="TRANSFER_ASSET",e[e.TRANSFER_VALUE=3]="TRANSFER_VALUE"}(t.OrderActionKind||(t.OrderActionKind={}));t.Order=class{}},2:function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(22)),r(i(23)),r(i(5)),r(i(10))},22:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.GENERAL=0]="GENERAL"}(t.ProviderIssue||(t.ProviderIssue={}));t.ProviderError=class extends Error{constructor(e,t){super(),this.name="ProviderError",this.issue=e,this.original=t,this.message=`GenericProvider error [issue: ${e}]`,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MANAGE_ABILITIES=0]="MANAGE_ABILITIES",e[e.CREATE_ASSET=1]="CREATE_ASSET",e[e.REVOKE_ASSET=2]="REVOKE_ASSET",e[e.TOGGLE_TRANSFERS=3]="TOGGLE_TRANSFERS",e[e.UPDATE_ASSET=4]="UPDATE_ASSET",e[e.ALLOW_CREATE_ASSET=5]="ALLOW_CREATE_ASSET",e[e.UPDATE_URI_BASE=6]="UPDATE_URI_BASE"}(t.AssetLedgerAbility||(t.AssetLedgerAbility={})),function(e){e[e.DESTROY_ASSET=1]="DESTROY_ASSET",e[e.UPDATE_ASSET=2]="UPDATE_ASSET",e[e.REVOKE_ASSET=4]="REVOKE_ASSET",e[e.TOGGLE_TRANSFERS=3]="TOGGLE_TRANSFERS"}(t.AssetLedgerCapability||(t.AssetLedgerCapability={}))},27:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function u(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const n=i(28),s=i(2),o=i(8);var u;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.PENDING=1]="PENDING",e[e.COMPLETED=2]="COMPLETED"}(u=t.MutationStatus||(t.MutationStatus={}));t.Mutation=class extends n.EventEmitter{constructor(e,t){super(),this.$confirmations=0,this.$timer=null,this.$status=u.INITIALIZED,this.$id=o.normalizeAddress(t),this.$provider=e}get id(){return this.$id}get provider(){return this.$provider}get confirmations(){return this.$confirmations}get senderId(){return this.$senderId}get receiverId(){return this.$receiverId}isPending(){return this.$status===u.PENDING}isCompleted(){return this.$status===u.COMPLETED}emit(...e){return super.emit.call(this,...e),this}on(...e){return super.on.call(this,...e),this}once(...e){return super.once.call(this,...e),this}off(e,t){return t?super.off(e,t):super.removeAllListeners(e),this}complete(){return r(this,void 0,void 0,function*(){const e=this.$status===u.INITIALIZED;return this.isCompleted()?this:(this.$status=u.PENDING,yield new Promise((t,i)=>{this.isCompleted()?t():(this.once(s.MutationEvent.COMPLETE,()=>t()),this.once(s.MutationEvent.ERROR,e=>i(e))),e&&this.loopUntilResolved()}),this)})}forget(){return this.$timer&&clearTimeout(this.$timer),this}loopUntilResolved(){return r(this,void 0,void 0,function*(){const e=yield this.getTransactionObject();if(!e)return this.emit(s.MutationEvent.ERROR,new Error("Mutation not found (1)"));e.to&&"0x0"!==e.to||(e.to=yield this.getTransactionReceipt().then(e=>e?e.contractAddress:null)),e.to?(this.$senderId=o.normalizeAddress(e.from),this.$receiverId=o.normalizeAddress(e.to),this.$confirmations=yield this.getLastBlock().then(t=>t-parseInt(e.blockNumber||t)).then(e=>e<0?0:e),this.$confirmations>=this.$provider.requiredConfirmations?(this.$status=u.COMPLETED,this.emit(s.MutationEvent.COMPLETE,this)):(this.emit(s.MutationEvent.CONFIRM,this),this.$timer=setTimeout(this.loopUntilResolved.bind(this),14e3))):this.$timer=setTimeout(this.loopUntilResolved.bind(this),14e3)})}getTransactionObject(){return r(this,void 0,void 0,function*(){return(yield this.$provider.post({method:"eth_getTransactionByHash",params:[this.id]})).result})}getTransactionReceipt(){return r(this,void 0,void 0,function*(){return(yield this.$provider.post({method:"eth_getTransactionReceipt",params:[this.id]})).result})}getLastBlock(){return r(this,void 0,void 0,function*(){const e=yield this.$provider.post({method:"eth_blockNumber"});return parseInt(e.result)})}}},28:function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,o,u,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(s(i=this._events[e]))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),i.apply(this,u)}else if(n(i))for(u=Array.prototype.slice.call(arguments,1),o=(a=i.slice()).length,c=0;c<o;c++)a[c].apply(this,u);return!0},i.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var i,s,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,s=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(i)){for(u=o;u-- >0;)if(i[u]===t||i[u].listener&&i[u].listener===t){s=u;break}if(s<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},29:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function u(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const n=i(7),s=i(6);t.GenericProvider=class{constructor(e){this.$id=0,this.accountId=e.accountId,this.unsafeRecipientIds=e.unsafeRecipientIds||[],this.assetLedgerSource=e.assetLedgerSource||"https://cdn.jsdelivr.net/gh/xpepermint/0xcert-contracts/asset-ledger.json",this.valueLedgerSource=e.valueLedgerSource||"https://cdn.jsdelivr.net/gh/xpepermint/0xcert-contracts/value-ledger.json",this.signMethod=void 0!==e.signMethod?e.signMethod:n.SignMethod.ETH_SIGN,this.requiredConfirmations=void 0!==e.requiredConfirmations?e.requiredConfirmations:1,this.orderGatewayId=e.orderGatewayId,this.$client=e.client&&e.client.currentProvider?e.client.currentProvider:e.client}post(e){return r(this,void 0,void 0,function*(){const t=Object.assign({},e);if("eth_sendTransaction"===t.method&&t.params.length){if(void 0===t.params[0].gas){const e=yield this.request(Object.assign({},t,{method:"eth_estimateGas"}));t.params[0].gas=Math.ceil(1.1*e.result).toString(16)}if(void 0===t.params[0].gasPrice){const e=yield this.request(Object.assign({},t,{method:"eth_gasPrice",params:[]}));t.params[0].gasPrice=Math.ceil(1.1*e.result).toString(16)}}return this.request(t)})}request(e){return r(this,void 0,void 0,function*(){const t=Object.assign({jsonrpc:"2.0",id:e.id||this.getNextId(),params:[]},e);return new Promise((e,i)=>{this.$client.send(t,(r,n)=>r?i(r):n.error?i(n.error):n.id!==t.id?i("Invalid RPC id"):e(n))}).catch(e=>{throw s.parseError(e)})})}getNextId(){return this.$id++,this.$id}}},5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMPLETE="complete",e.CONFIRM="confirm",e.ERROR="error"}(t.MutationEvent||(t.MutationEvent={}))},6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2);t.parseError=function(e){return e instanceof r.ProviderError?e:new r.ProviderError(r.ProviderIssue.GENERAL,e)}},7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ETH_SIGN=0]="ETH_SIGN",e[e.TREZOR=1]="TREZOR",e[e.EIP712=2]="EIP712"}(t.SignMethod||(t.SignMethod={}))},8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAddress=function(e){return e?e.toLowerCase():e}},97:function(e,t,i){window.$0xcert=window.$0xcert||{},Object.assign(window.$0xcert,i(98))},98:function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(1)),r(i(99))},99:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function u(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1);class s extends n.GenericProvider{constructor(e){super(Object.assign({},e,{client:"undefined"!=typeof window?window.ethereum:null,signMethod:n.SignMethod.EIP712}))}static getInstance(){return new s}isSupported(){return"undefined"!=typeof window&&void 0!==window.ethereum}isEnabled(){return r(this,void 0,void 0,function*(){return this.isSupported()&&(yield this.$client._metamask.isApproved())&&!!this.accountId})}enable(){return r(this,void 0,void 0,function*(){return this.isSupported()&&(this.accountId=yield this.$client.enable().then(e=>e[0])),this})}}t.MetamaskProvider=s}});