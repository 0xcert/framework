!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=92)}({12:function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(14)),o(n(16)),o(n(18)),o(n(20)),o(n(21)),o(n(22)),o(n(23)),o(n(24))},14:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function u(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,u)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=function(e,t){return o(this,void 0,void 0,function*(){return"undefined"!=typeof window?window.fetch(e,t):n(15)(e,t)})}},15:function(e,t,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();e.exports=t=o.fetch,t.default=o.fetch.bind(o),t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response},16:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function u(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,u)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.sha=function(e,t){return o(this,void 0,void 0,function*(){if("undefined"!=typeof window){const n=new window.TextEncoder("utf-8").encode(t),o=yield window.crypto.subtle.digest(`SHA-${e}`,n);return Array.from(new Uint8Array(o)).map(e=>`00${e.toString(16)}`.slice(-2)).join("")}return n(17).createHash(`sha${e}`).update(t).digest("hex")})}},17:function(e,t){e.exports=void 0},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(19);t.keccak256=function(e){return o.keccak256(e)}},19:function(e,t){const n="0123456789abcdef".split(""),o=[1,256,65536,16777216],i=[0,8,16,24],r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],s=e=>{var t,n,o,i,s,u,c,a,l,f,d,h,p,y,v,b,m,j,x,k,O,w,P,g,_,M,S,$,I,E,A,R,C,z,B,T,F,H,N,G,q,D,J,U,X,K,L,Q,V,W,Y,Z,ee,te,ne,oe,ie,re,se,ue,ce,ae,le;for(o=0;o<48;o+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],u=e[2]^e[12]^e[22]^e[32]^e[42],c=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(u<<1|c>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(c<<1|u>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=i^(a<<1|l>>>31),n=s^(l<<1|a>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=u^(f<<1|d>>>31),n=c^(d<<1|f>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=a^(h<<1|p>>>31),n=l^(p<<1|h>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=f^(i<<1|s>>>31),n=d^(s<<1|i>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,y=e[0],v=e[1],K=e[11]<<4|e[10]>>>28,L=e[10]<<4|e[11]>>>28,$=e[20]<<3|e[21]>>>29,I=e[21]<<3|e[20]>>>29,ue=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,D=e[40]<<18|e[41]>>>14,J=e[41]<<18|e[40]>>>14,z=e[2]<<1|e[3]>>>31,B=e[3]<<1|e[2]>>>31,b=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,Q=e[22]<<10|e[23]>>>22,V=e[23]<<10|e[22]>>>22,E=e[33]<<13|e[32]>>>19,A=e[32]<<13|e[33]>>>19,ae=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,T=e[14]<<6|e[15]>>>26,F=e[15]<<6|e[14]>>>26,j=e[25]<<11|e[24]>>>21,x=e[24]<<11|e[25]>>>21,W=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,C=e[44]<<29|e[45]>>>3,g=e[6]<<28|e[7]>>>4,_=e[7]<<28|e[6]>>>4,oe=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,H=e[26]<<25|e[27]>>>7,N=e[27]<<25|e[26]>>>7,k=e[36]<<21|e[37]>>>11,O=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,U=e[8]<<27|e[9]>>>5,X=e[9]<<27|e[8]>>>5,M=e[18]<<20|e[19]>>>12,S=e[19]<<20|e[18]>>>12,re=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,G=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,w=e[48]<<14|e[49]>>>18,P=e[49]<<14|e[48]>>>18,e[0]=y^~b&j,e[1]=v^~m&x,e[10]=g^~M&$,e[11]=_^~S&I,e[20]=z^~T&H,e[21]=B^~F&N,e[30]=U^~K&Q,e[31]=X^~L&V,e[40]=te^~oe&re,e[41]=ne^~ie&se,e[2]=b^~j&k,e[3]=m^~x&O,e[12]=M^~$&E,e[13]=S^~I&A,e[22]=T^~H&G,e[23]=F^~N&q,e[32]=K^~Q&W,e[33]=L^~V&Y,e[42]=oe^~re&ue,e[43]=ie^~se&ce,e[4]=j^~k&w,e[5]=x^~O&P,e[14]=$^~E&R,e[15]=I^~A&C,e[24]=H^~G&D,e[25]=N^~q&J,e[34]=Q^~W&Z,e[35]=V^~Y&ee,e[44]=re^~ue&ae,e[45]=se^~ce&le,e[6]=k^~w&y,e[7]=O^~P&v,e[16]=E^~R&g,e[17]=A^~C&_,e[26]=G^~D&z,e[27]=q^~J&B,e[36]=W^~Z&U,e[37]=Y^~ee&X,e[46]=ue^~ae&te,e[47]=ce^~le&ne,e[8]=w^~y&b,e[9]=P^~v&m,e[18]=R^~g&M,e[19]=C^~_&S,e[28]=D^~z&T,e[29]=J^~B&F,e[38]=Z^~U&K,e[39]=ee^~X&L,e[48]=ae^~te&oe,e[49]=le^~ne&ie,e[0]^=r[o],e[1]^=r[o+1]},u=e=>t=>{var r;if("0x"===t.slice(0,2)){r=[];for(var u=2,c=t.length;u<c;u+=2)r.push(parseInt(t.slice(u,u+2),16))}else r=t;return((e,t)=>{for(var r,u=t.length,c=e.blocks,a=e.blockCount<<2,l=e.blockCount,f=e.outputBlocks,d=e.s,h=0;h<u;){if(e.reset)for(e.reset=!1,c[0]=e.block,v=1;v<l+1;++v)c[v]=0;if("string"!=typeof t)for(v=e.start;h<u&&v<a;++h)c[v>>2]|=t[h]<<i[3&v++];else for(v=e.start;h<u&&v<a;++h)(r=t.charCodeAt(h))<128?c[v>>2]|=r<<i[3&v++]:r<2048?(c[v>>2]|=(192|r>>6)<<i[3&v++],c[v>>2]|=(128|63&r)<<i[3&v++]):r<55296||r>=57344?(c[v>>2]|=(224|r>>12)<<i[3&v++],c[v>>2]|=(128|r>>6&63)<<i[3&v++],c[v>>2]|=(128|63&r)<<i[3&v++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++h)),c[v>>2]|=(240|r>>18)<<i[3&v++],c[v>>2]|=(128|r>>12&63)<<i[3&v++],c[v>>2]|=(128|r>>6&63)<<i[3&v++],c[v>>2]|=(128|63&r)<<i[3&v++]);if(e.lastByteIndex=v,v>=a){for(e.start=v-a,e.block=c[l],v=0;v<l;++v)d[v]^=c[v];s(d),e.reset=!0}else e.start=v}if(c[(v=e.lastByteIndex)>>2]|=o[3&v],e.lastByteIndex===a)for(c[0]=c[l],v=1;v<l+1;++v)c[v]=0;for(c[l-1]|=2147483648,v=0;v<l;++v)d[v]^=c[v];s(d);for(var p,y="",v=0,b=0;b<f;){for(v=0;v<l&&b<f;++v,++b)p=d[v],y+=n[p>>4&15]+n[15&p]+n[p>>12&15]+n[p>>8&15]+n[p>>20&15]+n[p>>16&15]+n[p>>28&15]+n[p>>24&15];b%l==0&&(s(d),v=0)}return"0x"+y})((e=>({blocks:[],reset:!0,block:0,start:0,blockCount:1600-(e<<1)>>5,outputBlocks:e>>5,s:(e=>[].concat(e,e,e,e,e))([0,0,0,0,0,0,0,0,0,0])}))(e),r)};e.exports={keccak256:u(256),keccak512:u(512),keccak256s:u(256),keccak512s:u(512)}},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFloat=function(e){return parseFloat(`${e}`)||0}},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toInteger=function(e){return"number"==typeof e&&e>Number.MAX_SAFE_INTEGER?0:"boolean"==typeof e&&!0===e?1:parseInt(`${e}`)||0}},22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSeconds=function(e){return parseInt(`${parseFloat(`${e}`)/1e3}`)||0}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toString=function(e){return null!=e?e.toString():null}},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTuple=function e(t){if(!(t instanceof Object))return[];const n=[];let o=0;return Object.keys(t).forEach(i=>{if(t[i]instanceof Object)n[o]=e(t[i]);else if(t[i]instanceof Array){let r=0;const s=[];t[i].forEach(n=>{s[r]=e(t[i]),r++}),n[o]=s}else n[o]=t[i];o++}),n}},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(47))},47:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function u(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,u)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(48),r=n(12),s=n(50);class u{static getInstance(e){return new u(e)}constructor(e){this.schema=e.schema,this.merkle=new i.Merkle(Object.assign({hasher:e=>r.sha(256,s.toString(e))},e))}notarize(e){return o(this,void 0,void 0,function*(){const t=this.buildSchemaProps(e),n=yield this.buildCompoundProps(t);return(yield this.buildRecipes(n)).map(e=>({path:e.path,nodes:e.nodes,values:e.values}))})}disclose(e,t){return o(this,void 0,void 0,function*(){const n=this.buildSchemaProps(e),o=yield this.buildCompoundProps(n);return(yield this.buildRecipes(o,t)).map(e=>({path:e.path,nodes:e.nodes,values:e.values}))})}calculate(e,t){return o(this,void 0,void 0,function*(){try{return this.checkDataInclusion(e,t)?this.imprintRecipes(t):null}catch(e){return null}})}imprint(e){return o(this,void 0,void 0,function*(){return this.notarize(e).then(e=>e[0].nodes[0].hash)})}buildSchemaProps(e,t=this.schema,n=[]){return"array"===t.type?(e||[]).map((e,o)=>this.buildSchemaProps(e,t.items,[...n,o])).reduce((e,t)=>e.concat(t),[]):"object"===t.type?Object.keys(t.properties).sort().map(o=>{const i=this.buildSchemaProps((e||{})[o],t.properties[o],[...n,o]);return-1===["object","array"].indexOf(t.properties[o].type)?[i]:i}).reduce((e,t)=>e.concat(t),[]):{path:n,value:e,key:n.join("."),group:n.slice(0,-1).join(".")}}buildCompoundProps(e){return o(this,void 0,void 0,function*(){e=[...e];const t=this.buildPropGroups(e),n=Object.keys(t).sort((e,t)=>e>t?-1:1).filter(e=>""!==e);for(const o of n){const n=t[o],i=[...e.filter(e=>e.group===o)].sort((e,t)=>e.key>t.key?1:-1).map(e=>e.value),r=yield this.merkle.notarize(i);e.push({path:n,value:r.nodes[0].hash,key:n.join("."),group:n.slice(0,-1).join(".")})}return e.sort((e,t)=>e.key>t.key?1:-1)})}buildRecipes(e,t=null){return o(this,void 0,void 0,function*(){const n=t?s.stepPaths(t).map(e=>e.join(".")):null,i={};return e.forEach(e=>i[e.group]=e.path.slice(0,-1)),Promise.all(Object.keys(i).map(t=>o(this,void 0,void 0,function*(){const o=e.filter(e=>e.group===t).map(e=>e.value);let r=yield this.merkle.notarize(o);if(n){const o=e.filter(e=>e.group===t).map((e,t)=>-1===n.indexOf(e.key)?-1:t).filter(e=>-1!==e);r=yield this.merkle.disclose(r,o)}if(!n||-1!==n.indexOf(i[t].join(".")))return{path:i[t],values:r.values,nodes:r.nodes,key:i[t].join("."),group:i[t].slice(0,-1).join(".")}}))).then(e=>e.filter(e=>!!e))})}checkDataInclusion(e,t){const n=this.buildSchemaProps(e);t=s.cloneObject(t).map(e=>Object.assign({key:e.path.join("."),group:e.path.slice(0,-1).join(".")},e));for(const o of n){const n=s.readPath(o.path,e);if(void 0===n)continue;const i=o.path.slice(0,-1).join("."),r=t.find(e=>e.key===i);if(!r)return!1;const u=this.getPathIndexes(o.path).pop();if(r.values.find(e=>e.index===u).value!==n)return!1}return!0}imprintRecipes(e){return o(this,void 0,void 0,function*(){if(0===e.length)return this.getEmptyImprint();e=s.cloneObject(e).map(e=>Object.assign({key:e.path.join("."),group:e.path.slice(0,-1).join(".")},e)).sort((e,t)=>e.path.length>t.path.length?-1:1);for(const t of e){const n=yield this.merkle.imprint(t).catch(()=>"");t.nodes.unshift({index:0,hash:n});const o=t.path.slice(0,-1).join("."),i=this.getPathIndexes(t.path).slice(-1).pop(),r=e.find(e=>e.key===o);r&&r.values.unshift({index:i,value:n})}const t=e.find(e=>""===e.key);return t?t.nodes.find(e=>0===e.index).hash:this.getEmptyImprint()})}getPathIndexes(e){const t=[];let n=this.schema;for(const o of e)"array"===n.type?(t.push(o),n=n.items):"object"===n.type?(t.push(Object.keys(n.properties).sort().indexOf(o)),n=n.properties[o]):t.push(void 0);return t}getEmptyImprint(){return o(this,void 0,void 0,function*(){return this.merkle.notarize([]).then(e=>e.nodes[0].hash)})}buildPropGroups(e){const t={};return e.map(e=>{const t=[];return e.path.map(e=>(t.push(e),[...t]))}).reduce((e,t)=>e.concat(t),[]).forEach(e=>t[e.slice(0,-1).join(".")]=e.slice(0,-1)),t}}t.Cert=u},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(49))},49:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function u(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,u)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});t.Merkle=class{constructor(e){this.$options=Object.assign({hasher:e=>e},e)}notarize(e){return o(this,void 0,void 0,function*(){const t=[...e],n=[yield this.$options.hasher("")];for(let e=t.length-1;e>=0;e--){const o=n[0],i=t[e];n.unshift(yield this.$options.hasher(i));const r=n[0];n.unshift(yield this.$options.hasher(`${r}${o}`))}return{values:t.map((e,t)=>({index:t,value:e})),nodes:n.map((e,t)=>({index:t,hash:e}))}})}disclose(e,t){return o(this,void 0,void 0,function*(){const n=Math.max(...t.map(e=>e+1),0),o=[],i=[e.nodes.find(e=>e.index===2*n)];for(let r=n-1;r>=0;r--)-1!==t.indexOf(r)?o.unshift(e.values.find(e=>e.index===r)):i.unshift(e.nodes.find(e=>e.index===2*r+1));return{values:o,nodes:i}})}imprint(e){return o(this,void 0,void 0,function*(){const t=[...yield Promise.all(e.values.map(e=>o(this,void 0,void 0,function*(){return{index:2*e.index+1,hash:yield this.$options.hasher(e.value),value:e.value}}))),...e.nodes];for(let e=Math.max(...t.map(e=>e.index+1),0)-1;e>=0;e-=2){const n=t.find(t=>t.index===e),o=t.find(t=>t.index===e-1);n&&o&&t.unshift({index:e-2,hash:yield this.$options.hasher(`${o.hash}${n.hash}`)})}const n=t.find(e=>0===e.index);return n?n.hash:null})}}},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toString=function(e){try{return null==e?"":`${e}`}catch(e){return""}},t.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},t.stepPaths=function(e){const t={"":[]};return e.forEach(e=>{const n=[];e.forEach(e=>{n.push(e),t[n.join(".")]=[...n]})}),Object.keys(t).sort().map(e=>t[e])},t.readPath=function e(t,n){try{return Array.isArray(t)?0===t.length?n:e(t.slice(1),n[t[0]]):void 0}catch(e){return}}},92:function(e,t,n){window.$0xcert=window.$0xcert||{},Object.assign(window.$0xcert,n(46))}});